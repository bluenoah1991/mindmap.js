{"version":3,"sources":["../src/Link.js"],"names":["Link","node","opts","radius","open","box","render","bind","onMouseDown","x","y","setPosition","ctx","path","createPath","setStrokeStyle","ellipse","Math","PI","moveTo","lineTo","stroke","val","undefined","scene","e","switch","close"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;;;IAEqBA,I;AACjB,kBAAYC,IAAZ,EAAkBC,IAAlB,EAAuB;AAAA;;AACnB,aAAKD,IAAL,GAAYA,IAAZ;;AAEA,aAAKC,IAAL,GAAYA,QAAQ,EAApB;AACA,aAAKC,MAAL,GAAcD,KAAKC,MAAL,IAAe,CAA7B;AACA,aAAKC,IAAL,GAAY,KAAKF,IAAL,CAAUE,IAAV,IAAkB,IAA9B;;AAEA,aAAKC,GAAL,GAAW,aAAQ,KAAKC,MAAL,CAAYC,IAAZ,CAAiB,IAAjB,CAAR,CAAX;AACA,aAAKF,GAAL,CAASG,WAAT,GAAuB,KAAKA,WAAL,CAAiBD,IAAjB,CAAsB,IAAtB,CAAvB;AACH;;;;8BAEKE,C,EAAGC,C,EAAE;AACP,iBAAKL,GAAL,CAASM,WAAT,CAAqBF,CAArB,EAAwBC,CAAxB;AACH;;;+BAEME,G,EAAI;AACP,gBAAIC,OAAOD,IAAIE,UAAJ,EAAX;AACAF,gBAAIG,cAAJ,CAAmB,cAAnB;AACAF,iBAAKG,OAAL,CAAa,CAAb,EAAgB,CAAhB,EAAmB,KAAKb,MAAxB,EAAgC,KAAKA,MAArC,EAA6C,CAA7C,EAAgD,CAAhD,EAAmD,IAAIc,KAAKC,EAA5D;AACAL,iBAAKM,MAAL,CAAY,IAAI,KAAKhB,MAArB,EAA6B,CAA7B;AACAU,iBAAKO,MAAL,CAAY,KAAKjB,MAAL,GAAc,CAA1B,EAA6B,CAA7B;AACA,gBAAG,CAAC,KAAKC,IAAT,EAAc;AACVS,qBAAKM,MAAL,CAAY,CAAZ,EAAe,IAAI,KAAKhB,MAAxB;AACAU,qBAAKO,MAAL,CAAY,CAAZ,EAAe,KAAKjB,MAAL,GAAc,CAA7B;AACH;AACDS,gBAAIS,MAAJ,CAAWR,IAAX;AACH;;;gCAEMS,G,EAAI;AACP,gBAAGA,OAAOC,SAAV,EAAoB;AAChB,qBAAKnB,IAAL,GAAY,CAAC,KAAKA,IAAlB;AACH,aAFD,MAEO;AACH,qBAAKA,IAAL,GAAYkB,GAAZ;AACH;AACD,iBAAKjB,GAAL,CAASmB,KAAT,CAAelB,MAAf;AACH;;;oCAEWmB,C,EAAGhB,C,EAAGC,C,EAAE;AAChB,iBAAKgB,MAAL;AACA,gBAAG,KAAKtB,IAAR,EAAa;AACT,qBAAKH,IAAL,CAAUG,IAAV;AACH,aAFD,MAEO;AACH,qBAAKH,IAAL,CAAU0B,KAAV;AACH;AACJ;;;;;;kBA7CgB3B,I","file":"Link.js","sourcesContent":["import _ from 'lodash';\r\nimport {Box} from 'box.js';\r\n\r\nexport default class Link{\r\n    constructor(node, opts){\r\n        this.node = node;\r\n\r\n        this.opts = opts || {};\r\n        this.radius = opts.radius || 8;\r\n        this.open = this.opts.open || true;\r\n\r\n        this.box = new Box(this.render.bind(this));\r\n        this.box.onMouseDown = this.onMouseDown.bind(this);\r\n    }\r\n\r\n    reset(x, y){\r\n        this.box.setPosition(x, y);\r\n    }\r\n\r\n    render(ctx){\r\n        let path = ctx.createPath();\r\n        ctx.setStrokeStyle('lightskyblue');\r\n        path.ellipse(0, 0, this.radius, this.radius, 0, 0, 2 * Math.PI);\r\n        path.moveTo(2 - this.radius, 0);\r\n        path.lineTo(this.radius - 2, 0);\r\n        if(!this.open){\r\n            path.moveTo(0, 2 - this.radius);\r\n            path.lineTo(0, this.radius - 2);\r\n        }\r\n        ctx.stroke(path);\r\n    }\r\n\r\n    switch(val){\r\n        if(val == undefined){\r\n            this.open = !this.open;\r\n        } else {\r\n            this.open = val;\r\n        }\r\n        this.box.scene.render();\r\n    }\r\n\r\n    onMouseDown(e, x, y){\r\n        this.switch();\r\n        if(this.open){\r\n            this.node.open();\r\n        } else {\r\n            this.node.close();\r\n        }\r\n    }\r\n}"]}