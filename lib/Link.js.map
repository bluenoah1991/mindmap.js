{"version":3,"sources":["../src/Link.js"],"names":["Link","node","opts","radius","open","color","box","render","bind","onMouseDown","onTouch","onTouchStart","x","y","setPosition","ctx","path","createPath","setStrokeStyle","ellipse","Math","PI","moveTo","lineTo","stroke","val","undefined","scene","e","switch","close"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;;;IAEqBA,I;AACjB,kBAAYC,IAAZ,EAAkBC,IAAlB,EAAuB;AAAA;;AACnB,aAAKD,IAAL,GAAYA,IAAZ;;AAEA,aAAKC,IAAL,GAAYA,QAAQ,EAApB;AACA,aAAKC,MAAL,GAAcD,KAAKC,MAAL,IAAe,CAA7B;AACA,aAAKC,IAAL,GAAY,KAAKF,IAAL,CAAUE,IAAV,IAAkB,IAA9B;AACA,aAAKC,KAAL,GAAa,KAAKH,IAAL,CAAUG,KAAV,IAAmB,cAAhC;;AAEA,aAAKC,GAAL,GAAW,aAAQ,KAAKC,MAAL,CAAYC,IAAZ,CAAiB,IAAjB,CAAR,CAAX;AACA,aAAKF,GAAL,CAASG,WAAT,GAAuB,KAAKC,OAAL,CAAaF,IAAb,CAAkB,IAAlB,CAAvB;AACA,aAAKF,GAAL,CAASK,YAAT,GAAwB,KAAKD,OAAL,CAAaF,IAAb,CAAkB,IAAlB,CAAxB;AACH;;;;8BAEKI,C,EAAGC,C,EAAE;AACP,iBAAKP,GAAL,CAASQ,WAAT,CAAqBF,CAArB,EAAwBC,CAAxB;AACH;;;+BAEME,G,EAAI;AACP,gBAAIC,OAAOD,IAAIE,UAAJ,EAAX;AACAF,gBAAIG,cAAJ,CAAmB,KAAKb,KAAxB;AACAW,iBAAKG,OAAL,CAAa,CAAb,EAAgB,CAAhB,EAAmB,KAAKhB,MAAxB,EAAgC,KAAKA,MAArC,EAA6C,CAA7C,EAAgD,CAAhD,EAAmD,IAAIiB,KAAKC,EAA5D;AACAL,iBAAKM,MAAL,CAAY,IAAI,KAAKnB,MAArB,EAA6B,CAA7B;AACAa,iBAAKO,MAAL,CAAY,KAAKpB,MAAL,GAAc,CAA1B,EAA6B,CAA7B;AACA,gBAAG,CAAC,KAAKC,IAAT,EAAc;AACVY,qBAAKM,MAAL,CAAY,CAAZ,EAAe,IAAI,KAAKnB,MAAxB;AACAa,qBAAKO,MAAL,CAAY,CAAZ,EAAe,KAAKpB,MAAL,GAAc,CAA7B;AACH;AACDY,gBAAIS,MAAJ,CAAWR,IAAX;AACH;;;gCAEMS,G,EAAI;AACP,gBAAGA,OAAOC,SAAV,EAAoB;AAChB,qBAAKtB,IAAL,GAAY,CAAC,KAAKA,IAAlB;AACH,aAFD,MAEO;AACH,qBAAKA,IAAL,GAAYqB,GAAZ;AACH;AACD,iBAAKnB,GAAL,CAASqB,KAAT,CAAepB,MAAf;AACH;;;gCAEOqB,C,EAAGhB,C,EAAGC,C,EAAE;AACZ,iBAAKgB,MAAL;AACA,gBAAG,KAAKzB,IAAR,EAAa;AACT,qBAAKH,IAAL,CAAUG,IAAV;AACH,aAFD,MAEO;AACH,qBAAKH,IAAL,CAAU6B,KAAV;AACH;AACJ;;;;;;kBA/CgB9B,I","file":"Link.js","sourcesContent":["import _ from 'lodash';\r\nimport {Box} from 'box.js';\r\n\r\nexport default class Link{\r\n    constructor(node, opts){\r\n        this.node = node;\r\n\r\n        this.opts = opts || {};\r\n        this.radius = opts.radius || 8;\r\n        this.open = this.opts.open || true;\r\n        this.color = this.opts.color || 'lightskyblue';\r\n\r\n        this.box = new Box(this.render.bind(this));\r\n        this.box.onMouseDown = this.onTouch.bind(this);\r\n        this.box.onTouchStart = this.onTouch.bind(this)\r\n    }\r\n\r\n    reset(x, y){\r\n        this.box.setPosition(x, y);\r\n    }\r\n\r\n    render(ctx){\r\n        let path = ctx.createPath();\r\n        ctx.setStrokeStyle(this.color);\r\n        path.ellipse(0, 0, this.radius, this.radius, 0, 0, 2 * Math.PI);\r\n        path.moveTo(2 - this.radius, 0);\r\n        path.lineTo(this.radius - 2, 0);\r\n        if(!this.open){\r\n            path.moveTo(0, 2 - this.radius);\r\n            path.lineTo(0, this.radius - 2);\r\n        }\r\n        ctx.stroke(path);\r\n    }\r\n\r\n    switch(val){\r\n        if(val == undefined){\r\n            this.open = !this.open;\r\n        } else {\r\n            this.open = val;\r\n        }\r\n        this.box.scene.render();\r\n    }\r\n\r\n    onTouch(e, x, y){\r\n        this.switch();\r\n        if(this.open){\r\n            this.node.open();\r\n        } else {\r\n            this.node.close();\r\n        }\r\n    }\r\n}"]}